
<div class="container text-center">

  <h2 class="pt-5 pb-5">投稿詳細</h2>

    <div class="pb-4"><%= image_tag @post.get_image,size: "400x300" %></div>

      <div><%= link_to @post.user.name, user_path(@post.user.id) %>@<%= @post.user.account_id %></div>
      <div>▷場所名：<%= @post.location_name %></div>
      <div>▷都道府県：<%= @post.prefecture_i18n %></div>

      <div>▷ジャンル：<%= @post.location_genre_i18n %></div>
      <div>▷メモ：<%= @post.memo %></div>
      <div>▷緯度：<%= @post.latitude %></div>
      <div>▷経度：<%= @post.longitude %></div>


      <div>▷住所：<%= @post.address %></div>
      <div id='map'></div>

      <style>
        #map {
          height: 400px;
          width: 600px;
        }
      </style>


    <!--googleマップでピン止め、マップ表示-->

  <% if @post.user == current_user %>
    <%= link_to "編集", edit_post_path(@post.id) %>
    <%= link_to "削除", post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
  <% end %>

</div>


  <script>
  //初期マップの設定
  let map
  let marker
  function initMap(){
    geocoder = new google.maps.Geocoder()

    map = new google.maps.Map(document.getElementById('map'), {
      center:  {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>},
      zoom: 15,
    });

     marker = new google.maps.Marker({
      position:  {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>},
      map: map
    });
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAgTeNLc165-cfs1Py1tbvvfjXe2YNukGE&callback=initMap" async defer></script>

